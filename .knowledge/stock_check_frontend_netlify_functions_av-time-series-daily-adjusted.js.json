{"is_source_file": true, "format": "JavaScript", "description": "This file contains a Netlify serverless function that acts as a proxy for the Alpha Vantage API's TIME_SERIES_DAILY_ADJUSTED endpoint. It implements in-memory caching, handles query parameters, and manages API key security, providing features like TTL-based caching and error handling.", "external_files": ["node-fetch"], "external_methods": ["fetch"], "published": ["handler"], "classes": [], "methods": [{"name": "jsonResponse(statusCode, obj, extraHeaders = {})", "description": "Creates a standardized JSON HTTP response object with appropriate headers and stringified body.", "scope": "", "scopeKind": ""}, {"name": "getTtlSeconds(outputsize)", "description": "Determines the cache TTL based on output size and environment variable settings.", "scope": "", "scopeKind": ""}, {"name": "cacheKey({ symbol, outputsize })", "description": "Generates a cache key string based on symbol and output size.", "scope": "", "scopeKind": ""}, {"name": "nowMs()", "description": "Returns the current timestamp in milliseconds.", "scope": "", "scopeKind": ""}, {"name": "fetchAlphaVantage({ apiKey, symbol, outputsize })", "description": "Performs the fetch request to the Alpha Vantage API with proper URL encoding and headers.", "scope": "", "scopeKind": ""}, {"name": "handler(event)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "process.env.ALPHA_VANTAGE_CACHE_TTL_SECONDS", "process.env.ALPHA_VANTAGE_API_KEY", "fetchAlphaVantage"], "search-terms": ["Alpha Vantage proxy", "TIME_SERIES_DAILY_ADJUSTED", "Netlify Function", "stock data caching", "alpha vantage API key", "in-memory cache"], "state": 2, "file_id": 37, "knowledge_revision": 95, "git_revision": "c98d2793424ed603f5bc38d0ae47ba28bc27473a", "ctags": [{"_type": "tag", "name": "AV_BASE", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^const AV_BASE = \"https:\\/\\/www.alphavantage.co\\/query\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "CACHE", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^const CACHE = new Map();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DEFAULT_TTL_SECONDS", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^const DEFAULT_TTL_SECONDS = 60; \\/\\/ keep short by default; overrideable via env$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "access-control-allow-origin", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^      \"access-control-allow-origin\": \"*\",$/", "language": "JavaScript", "kind": "property", "scope": "handler.headers", "scopeKind": "class"}, {"_type": "tag", "name": "cacheKey", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^function cacheKey({ symbol, outputsize }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ symbol, outputsize })"}, {"_type": "tag", "name": "content-type", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^      \"content-type\": upstream.contentType,$/", "language": "JavaScript", "kind": "property", "scope": "handler.headers", "scopeKind": "class"}, {"_type": "tag", "name": "fetchAlphaVantage", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^async function fetchAlphaVantage({ apiKey, symbol, outputsize }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ apiKey, symbol, outputsize })"}, {"_type": "tag", "name": "getTtlSeconds", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^function getTtlSeconds(outputsize) {$/", "language": "JavaScript", "kind": "function", "signature": "(outputsize)"}, {"_type": "tag", "name": "handler", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^export async function handler(event) {$/", "language": "JavaScript", "kind": "function", "signature": "(event)"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^    const headers = {$/", "language": "JavaScript", "kind": "class", "scope": "handler", "scopeKind": "class"}, {"_type": "tag", "name": "jsonResponse", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^function jsonResponse(statusCode, obj, extraHeaders = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(statusCode, obj, extraHeaders = {})"}, {"_type": "tag", "name": "nowMs", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^function nowMs() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "x-cache", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^      \"x-cache\": \"MISS\",$/", "language": "JavaScript", "kind": "property", "scope": "handler.headers", "scopeKind": "class"}, {"_type": "tag", "name": "x-cache-ttl", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "pattern": "/^      \"x-cache-ttl\": String(ttlSeconds),$/", "language": "JavaScript", "kind": "property", "scope": "handler.headers", "scopeKind": "class"}], "hash": "b3b6d49465238debecf7f833e2de0261", "format-version": 4, "code-base-name": "stock_check_frontend", "filename": "stock_check_frontend/netlify/functions/av-time-series-daily-adjusted.js", "fields": [{"name": "\"access-control-allow-origin\": \"*\",", "scope": "handler.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "\"content-type\": upstream.contentType,", "scope": "handler.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "\"x-cache\": \"MISS\",", "scope": "handler.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "\"x-cache-ttl\": String(ttlSeconds),", "scope": "handler.headers", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"95": "c98d2793424ed603f5bc38d0ae47ba28bc27473a"}]}