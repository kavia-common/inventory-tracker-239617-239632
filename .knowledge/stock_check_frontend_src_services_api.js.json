{"is_source_file": true, "format": "JavaScript", "description": "This file defines a minimal API client for inventory operations, supporting both API-based and localStorage-based modes. It includes functions for fetching, creating, updating, and deleting inventory items, with fallback mechanisms when API calls fail. The code appears to be part of a frontend application, likely React-based, that manages inventory data.", "external_files": ["fetch (built-in browser API)", "localStorage (browser API)", "process.env (environment variables, provided in build environment)"], "external_methods": ["fetch", "setTimeout", "clearTimeout"], "published": ["getInventoryItems", "createInventoryItem", "updateInventoryItem", "deleteInventoryItem"], "classes": [], "methods": [{"name": "sleep(ms)", "description": "Pauses execution asynchronously for a specified number of milliseconds.", "scope": "", "scopeKind": ""}, {"name": "safeJsonParse(text)", "description": "Safely parses a JSON string, returning null if parsing fails.", "scope": "", "scopeKind": ""}, {"name": "getApiBase()", "description": "Retrieves the API base URL from environment variables, trimmed of trailing slashes.", "scope": "", "scopeKind": ""}, {"name": "readLocalItems()", "description": "Reads inventory items from localStorage, parsing JSON and ensuring array type.", "scope": "", "scopeKind": ""}, {"name": "writeLocalItems(items)", "description": "Stores an array of inventory items into localStorage after stringification.", "scope": "", "scopeKind": ""}, {"name": "newId()", "description": "Generates a unique ID based on current timestamp and random string.", "scope": "", "scopeKind": ""}, {"name": "tryFetch(url, options)", "description": "Performs a fetch request with a timeout, aborting if it takes longer than 8 seconds.", "scope": "", "scopeKind": ""}, {"name": "getInventoryItems()", "description": "Fetches inventory data from API or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "createInventoryItem(item)", "description": "Creates a new inventory item via API or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "updateInventoryItem(id, patch)", "description": "Updates an existing inventory item identified by ID via API or localStorage fallback.", "scope": "", "scopeKind": ""}, {"name": "deleteInventoryItem(id)", "description": "Deletes an inventory item by ID via API or localStorage fallback.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "setTimeout", "clearTimeout", "JSON.parse", "localStorage.getItem", "localStorage.setItem"], "search-terms": ["inventory API client", "fallback localStorage inventory", "inventory CRUD", "api base URL", "inventory item ID", "React app", "inventory management"], "state": 2, "file_id": 13, "knowledge_revision": 39, "git_revision": "6def082fede59928bde2066d2a1cecd4074783ed", "ctags": [{"_type": "tag", "name": "LS_KEY", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^const LS_KEY = \"inventory_items_v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    category: item.category || \"General\",$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "createInventoryItem", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^export async function createInventoryItem(item) {$/", "language": "JavaScript", "kind": "function", "signature": "(item)"}, {"_type": "tag", "name": "created", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^  const created = {$/", "language": "JavaScript", "kind": "class", "scope": "createInventoryItem", "scopeKind": "class"}, {"_type": "tag", "name": "deleteInventoryItem", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^export async function deleteInventoryItem(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^function getApiBase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getInventoryItems", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^export async function getInventoryItems() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    id: newId(),$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "location", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    location: item.location || \"Main\",$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    name: item.name || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "newId", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^function newId() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    notes: item.notes || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "quantity", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    quantity: Number.isFinite(Number(item.quantity)) ? Number(item.quantity) : 0,$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "readLocalItems", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^function readLocalItems() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "reorderPoint", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    reorderPoint: Number.isFinite(Number(item.reorderPoint)) ? Number(item.reorderPoint) : 0,$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "safeJsonParse", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^function safeJsonParse(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)"}, {"_type": "tag", "name": "sku", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    sku: item.sku || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "sleep", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^function sleep(ms) {$/", "language": "JavaScript", "kind": "function", "signature": "(ms)"}, {"_type": "tag", "name": "tryFetch", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^async function tryFetch(url, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options)"}, {"_type": "tag", "name": "unitPrice", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    unitPrice: Number.isFinite(Number(item.unitPrice)) ? Number(item.unitPrice) : 0,$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "updateInventoryItem", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^export async function updateInventoryItem(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^    updatedAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "createInventoryItem.created", "scopeKind": "class"}, {"_type": "tag", "name": "writeLocalItems", "path": "/home/kavia/workspace/code-generation/inventory-tracker-239617-239632/stock_check_frontend/src/services/api.js", "pattern": "/^function writeLocalItems(items) {$/", "language": "JavaScript", "kind": "function", "signature": "(items)"}], "hash": "bf142d260ec798657ccbc133084cab42", "format-version": 4, "code-base-name": "stock_check_frontend", "filename": "stock_check_frontend/src/services/api.js", "fields": [{"name": "category: item.category || \"General\",", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}, {"name": "id: newId(),", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}, {"name": "location: item.location || \"Main\",", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}, {"name": "name: item.name || \"\",", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}, {"name": "notes: item.notes || \"\",", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}, {"name": "quantity: Number.isFinite(Number(item.quantity)) ? Number(item.quantity) : 0,", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}, {"name": "reorderPoint: Number.isFinite(Number(item.reorderPoint)) ? Number(item.reorderPoint) : 0,", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}, {"name": "sku: item.sku || \"\",", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}, {"name": "unitPrice: Number.isFinite(Number(item.unitPrice)) ? Number(item.unitPrice) : 0,", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}, {"name": "updatedAt: new Date().toISOString(),", "scope": "createInventoryItem.created", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"39": "6def082fede59928bde2066d2a1cecd4074783ed"}]}